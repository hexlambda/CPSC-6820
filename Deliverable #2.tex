\documentclass{article}

\usepackage{graphicx}
\usepackage{booktabs}
\usepackage{array}
\usepackage{lscape}
\usepackage{tikz}
\usetikzlibrary{shapes.geometric, shapes.misc, positioning, arrows}

\title{Automatic Pet Feeder\\
\large CPSC-6820 Deliverable \#2---System Overview Document}
\author{Logan Swoyer \and Sriram Vishnubhotla}
\date{February 2025}

\begin{document}

\maketitle

\section{Executive Summary}
It feels terrible to realize we did not feed our pets---whether it is because we were running late and were in a hurry or had too much on our mind and forgot about it. Times like these are when the Automatic Pet Feeder comes in handy. It comes with a nifty set of features to take care of your pet feeding needs including---the ability to set multiple food dispense times a day, on-device dispense schedule settings, internet connectivity to pair your mobile devices and publish logs, a mobile app to receive notifications and view logs as well as to set the dispense schedule and the ability to set dispense quantities per each dispense time. Internet connectivity is completely optional and is helpful to check logs and remotely edit the dispense schedule.

\section{System Description}
\subsection{Software}
\subsection{State Machine}
\begin{figure}
    \centering
    \tikzstyle{terminal} = [rounded rectangle,
    minimum width=5em,
    minimum height=2em,
    text centered,
    draw,
    fill=red!10]

    \tikzstyle{io} = [trapezium,
    trapezium stretches=true,
    trapezium left angle=-75,
    trapezium right angle=-75,
    minimum width=7.5em,
    minimum height=2.5em,
    text centered,
    draw,
    fill=blue!10]

    \tikzstyle{process} = [rectangle,
    minimum width=7.5em,
    minimum height=2.5em,
    text centered,
    text width=3cm,
    draw,
    fill=gray!20]

    \tikzstyle{decision} = [diamond,
    minimum width=2.5em,
    minimum height=2.5em,
    aspect=1.5,
    inner sep=1,
    text centered,
    draw,
    fill=orange!10]
    \tikzstyle{arrow} = [->,>=stealth]
    \begin{tikzpicture}[node distance=2.5em]
        \node (start) [terminal] {Start};
        \node (inclock) [io, below=of start, text width=2.5cm] {Time input to set device clock};
        \node (inschedule) [io, below=of inclock, text width=3.5cm] {Dispense schedule and portion size input};

        \node (netcond) [decision, right=of start, text width=2.5cm] {Connected to internet?};
        \node (srvconn) [process, below=of netcond] {Connect to server and fetch data};

        \node (wait) [terminal, below=of inschedule] {Wait};

        \node (predispchk) [process, below=of wait] {Check remaining food in storage};
        \node (predispcond) [decision, below=of predispchk, text width=2.5cm] {Sufficient food in storage?};
        \node (predispwarn) [io, right=of predispcond, text width=2.5cm] {Alert the user and display indicator};

        \node (dispfood) [process, below=of predispcond] {Dispense food---portion size minus leftovers in the dispense container};

        \node (dispalrt) [io, below=of dispfood] {Notify the user};

        \node (postdispchk) [process, left=of dispalrt] {Check remaining food in storage};
        \node (postdispcond) [decision, above=of postdispchk, text width=2.5cm] {Sufficient food in storage?};
        \node (postdispwarn) [io, above=of postdispcond, text width=2.5cm] {Alert the user and display indicator};

        \node (stop) [terminal, below=of dispalrt] {Stop};

        \draw [arrow] (start) -- (inclock);
        \draw [arrow] (inclock) -- (inschedule);
        \draw [arrow] (inschedule) -- (wait);

        \draw [arrow] (start) -- (netcond);
        \draw [arrow] (netcond.east) -- node[above] {Yes} +(0.5,0) |- (srvconn);
        \draw [arrow] (netcond) |- node[right] {No} (inclock);
        \draw [arrow] (srvconn) -- +(0,-2) -| (wait);

        \draw [arrow] (wait) -- node[left] {Timer trigger} (predispchk);
        \draw [arrow] (predispchk) -- (predispcond);
        \draw [arrow] (predispcond) -- node[left] {Yes} (dispfood);
        \draw [arrow] (predispcond) -- node[above] {No} (predispwarn);
        \draw [arrow] (predispwarn) |- (wait);

        \draw [arrow] (dispalrt) -- (postdispchk);
        \draw [arrow] (postdispchk) -- (postdispcond);
        \draw [arrow] (postdispcond) -- node[left] {No} (postdispwarn);
        \draw [arrow] (postdispwarn) |- (wait);

        \draw [arrow] (dispfood) -- (dispalrt);
        \draw [arrow] (dispalrt) -- (stop);
    \end{tikzpicture}
\end{figure}
\subsection{Hardware}
\subsection{Parts}
\begin{landscape}
    \begin{table}[]
        \begin{tabular*}{\linewidth}{@{}p{0.2\linewidth}p{0.2\linewidth}p{0.225\linewidth}>{\raggedleft}p{0.075\linewidth}p{0.15\linewidth}@{}}
            \toprule
            Title & Part \# & Supplier & Price & Description \\ \midrule
            Rocker Switch & COM-11138 & Sparkfun & 0.55 & On-off switch \\ \midrule
            Joystick with Select Button & 512 & Adafruit & 5.95 & Navigation and confirmation button combo \\ \midrule
            Buzzer & PS1240P02BT & TDK Corporation & 0.55 &  \\ \midrule
            Graphic LCD Display & NHD-C12832A1Z-NSW-BBW-3V3 & Newhaven Display Intl & 12.82 &  \\ \midrule
            WiFi Module & ESP32-S2FH4 & Espressif Systems & 1.48 &  \\ \midrule
            Linear actuator & FIT0803 & DFRobot & 24.00 & To open/close the dispenser \\ \midrule
            MSP430FR5994 Microcontroller & MSP-EXP430FR5994 & Texas Instruments & 20.39 &  \\ \midrule
            Force sensor & GHF-10 & UNEO Inc. & 5.86 &  \\ \midrule
            Optical sensor & VL6180V1NR/1 & STMicroelectronics & 3.37 &  \\ \midrule
            &  &  & 74.97 &  \\ \bottomrule
        \end{tabular*}
    \end{table}
\end{landscape}
\section{Resources, References and Appendix}
\end{document}
